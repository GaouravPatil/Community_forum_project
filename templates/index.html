<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Modern Discussion Forum</title>
  <style>
    /* ---------- Base & Theming ---------- */
    :root {
      --bg-grad-a: #667eea;
      --bg-grad-b: #764ba2;
      --text-1: #2d3748;
      --text-2: #4a5568;
      --text-3: #718096;
      --card: rgba(255, 255, 255, 0.98);
      --good: #48bb78;
      --bad: #f56565;
      --muted: #e2e8f0;
      --shadow-sm: 0 4px 6px rgba(0,0,0,.1);
      --shadow-md: 0 10px 20px rgba(0,0,0,.15);
      --shadow-lg: 0 20px 40px rgba(0,0,0,.2);
      --radius: 16px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, var(--bg-grad-a) 0%, var(--bg-grad-b) 100%);
      color: var(--text-1);
      min-height: 100vh;
      line-height: 1.6;
      position: relative;
      overflow-x: hidden;
    }

    /* Animated background particles */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%),
                  radial-gradient(circle at 80% 80%, rgba(255,255,255,0.1) 0%, transparent 50%);
      animation: float 20s ease-in-out infinite;
      pointer-events: none;
      z-index: 0;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      50% { transform: translate(30px, -30px) scale(1.1); }
    }

    /* ---------- Motion preferences ---------- */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after { animation: none !important; transition: none !important; }
    }

    /* ---------- Animations ---------- */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes slideInRight {
      from { opacity: 0; transform: translateX(40px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    @keyframes pop {
      0% { transform: scale(.9); opacity: 0; }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); opacity: 1; }
    }
    
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: .7; }
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    /* ---------- Header ---------- */
    header {
      background: var(--card);
      backdrop-filter: blur(20px);
      box-shadow: var(--shadow-sm);
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      z-index: 100;
      animation: fadeInUp 0.6s ease;
    }
    
    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      gap: 1rem;
      justify-content: space-between;
      align-items: center;
    }
    
    h1 {
      font-size: 1.6rem;
      background: linear-gradient(135deg, var(--bg-grad-a) 0%, var(--bg-grad-b) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: .3px;
      animation: slideInRight 0.6s ease;
    }
    
    nav {
      display: flex;
      gap: .5rem;
      align-items: center;
      flex-wrap: wrap;
    }
    
    nav a {
      color: var(--text-2);
      text-decoration: none;
      padding: .55rem 1rem;
      border-radius: 10px;
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
      font-weight: 600;
      font-size: .95rem;
      position: relative;
      overflow: hidden;
    }
    
    nav a::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--bg-grad-a) 0%, var(--bg-grad-b) 100%);
      opacity: 0;
      transition: opacity .3s ease;
      z-index: -1;
    }
    
    nav a:hover::before,
    nav a:focus-visible::before {
      opacity: 1;
    }
    
    nav a:hover,
    nav a:focus-visible {
      color: #fff;
      transform: translateY(-3px);
      box-shadow: var(--shadow-sm);
      outline: none;
    }
    
    .user-info {
      color: var(--text-1);
      font-weight: 700;
      padding: .55rem 1rem;
      background: linear-gradient(135deg, rgba(102,126,234,.1), rgba(118,75,162,.1));
      border-radius: 10px;
      animation: pulse 2s ease-in-out infinite;
    }

    /* ---------- Layout ---------- */
    .container {
      display: flex;
      max-width: 1400px;
      margin: 2rem auto;
      padding: 0 2rem;
      gap: 2rem;
      position: relative;
      z-index: 1;
    }
    
    .sidebar {
      flex: 0 0 300px;
      position: sticky;
      top: 120px;
      height: fit-content;
    }
    
    .main {
      flex: 1;
      min-width: 0;
    }

    .sidebar-card {
      background: var(--card);
      backdrop-filter: blur(20px);
      border-radius: var(--radius);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: var(--shadow-md);
      animation: fadeInUp .5s ease both;
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .sidebar-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }
    
    .sidebar-card h3 {
      color: var(--text-1);
      margin-bottom: 1rem;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: .5rem;
    }

    .sidebar ul { list-style: none; }
    .sidebar li {
      margin-bottom: .6rem;
      animation: fadeInUp .6s ease both;
    }
    
    .sidebar li:nth-child(2) { animation-delay: .1s; }
    .sidebar li:nth-child(3) { animation-delay: .2s; }
    .sidebar li:nth-child(4) { animation-delay: .3s; }
    .sidebar li:nth-child(5) { animation-delay: .4s; }
    
    .sidebar a {
      color: var(--bg-grad-a);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: .5rem;
      padding: .6rem .8rem;
      border-radius: 10px;
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .sidebar a::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: linear-gradient(135deg, var(--bg-grad-a), var(--bg-grad-b));
      transform: scaleY(0);
      transition: transform .3s ease;
    }
    
    .sidebar a:hover::before,
    .sidebar a:focus-visible::before {
      transform: scaleY(1);
    }
    
    .sidebar a:hover,
    .sidebar a:focus-visible {
      background: linear-gradient(135deg, rgba(102,126,234,.1), rgba(118,75,162,.05));
      transform: translateX(8px);
      outline: none;
    }

    /* ---------- Search ---------- */
    .search {
      display: flex;
      gap: .6rem;
      margin-bottom: 1.5rem;
      align-items: center;
      animation: fadeInUp .5s ease;
    }
    
    .search input {
      width: 100%;
      padding: 1rem 1.2rem;
      border: 2px solid var(--muted);
      border-radius: 14px;
      font-size: 1rem;
      background: var(--card);
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .search input:focus {
      outline: none;
      border-color: var(--bg-grad-a);
      box-shadow: 0 0 0 4px rgba(102,126,234,.12), var(--shadow-sm);
      transform: translateY(-2px);
    }
    
    .btn-primary {
      padding: 1rem 1.5rem;
      background: linear-gradient(135deg, var(--bg-grad-a), var(--bg-grad-b));
      color: #fff;
      border: none;
      border-radius: 14px;
      cursor: pointer;
      font-size: .95rem;
      font-weight: 700;
      box-shadow: var(--shadow-sm);
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .btn-primary::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,.3);
      transform: translate(-50%, -50%);
      transition: width .6s ease, height .6s ease;
    }
    
    .btn-primary:hover::before {
      width: 300px;
      height: 300px;
    }
    
    .btn-primary:hover,
    .btn-primary:focus-visible {
      transform: translateY(-3px) scale(1.02);
      box-shadow: var(--shadow-md);
      outline: none;
    }
    
    .btn-primary:active {
      transform: translateY(-1px) scale(0.98);
    }

    /* ---------- New Thread ---------- */
    .new-thread {
      background: var(--card);
      border-radius: var(--radius);
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: var(--shadow-md);
      animation: fadeInUp .6s ease;
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .new-thread:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-3px);
    }
    
    .new-thread h3 {
      color: var(--text-1);
      margin-bottom: 1.5rem;
      font-size: 1.3rem;
      display: flex;
      align-items: center;
      gap: .5rem;
    }
    
    .new-thread input,
    .new-thread textarea,
    .new-thread select {
      width: 100%;
      padding: 1rem 1.2rem;
      margin-bottom: 1rem;
      border: 2px solid var(--muted);
      border-radius: 12px;
      font: inherit;
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
      background: #fff;
    }
    
    .new-thread input:focus,
    .new-thread textarea:focus,
    .new-thread select:focus {
      outline: none;
      border-color: var(--bg-grad-a);
      box-shadow: 0 0 0 4px rgba(102,126,234,.1);
      transform: translateY(-2px);
    }
    
    .new-thread textarea {
      min-height: 140px;
      resize: vertical;
    }

    /* ---------- Threads ---------- */
    .thread {
      background: var(--card);
      border-radius: var(--radius);
      margin-bottom: 1.5rem;
      padding: 1.5rem;
      box-shadow: var(--shadow-md);
      transition: all .4s cubic-bezier(0.4, 0, 0.2, 1);
      animation: fadeInUp .6s ease both;
      position: relative;
      overflow: hidden;
    }
    
    .thread::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--bg-grad-a), var(--bg-grad-b));
      transform: scaleX(0);
      transform-origin: left;
      transition: transform .4s ease;
    }
    
    .thread:hover::before {
      transform: scaleX(1);
    }
    
    .thread:hover {
      transform: translateY(-8px) scale(1.01);
      box-shadow: var(--shadow-lg);
    }
    
    .thread h4 {
      color: var(--text-1);
      margin-bottom: .8rem;
      font-size: 1.3rem;
      transition: color .3s ease;
    }
    
    .thread:hover h4 {
      color: var(--bg-grad-a);
    }
    
    .thread p {
      color: var(--text-2);
      margin-bottom: 1rem;
      line-height: 1.7;
    }

    .thread-meta {
      display: flex;
      gap: 1rem;
      font-size: .9rem;
      color: var(--text-3);
      margin-bottom: 1rem;
      flex-wrap: wrap;
      align-items: center;
    }
    
    .thread-meta span {
      display: flex;
      align-items: center;
      gap: .3rem;
    }

    .vote-buttons {
      display: inline-flex;
      gap: .3rem;
      align-items: center;
      background: linear-gradient(135deg, rgba(102,126,234,.05), rgba(118,75,162,.05));
      padding: .3rem .5rem;
      border-radius: 12px;
      transition: all .3s ease;
    }
    
    .vote-buttons:hover {
      background: linear-gradient(135deg, rgba(102,126,234,.1), rgba(118,75,162,.1));
      transform: scale(1.05);
    }
    
    .vote-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.2rem;
      padding: .3rem .5rem;
      border-radius: 8px;
      transition: all .2s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }
    
    .vote-btn:hover,
    .vote-btn:focus-visible {
      background: rgba(0,0,0,.06);
      transform: scale(1.2);
      outline: none;
    }
    
    .vote-btn:active {
      transform: scale(.95);
    }
    
    .vote-btn[data-state="up"] {
      color: var(--good);
      animation: bounce .6s ease;
    }
    
    .vote-btn[data-state="down"] {
      color: var(--bad);
      animation: bounce .6s ease;
    }
    
    .vote-count {
      font-weight: 800;
      margin: 0 .4rem;
      min-width: 1.5rem;
      display: inline-block;
      text-align: center;
      transition: all .3s ease;
    }

    .replies {
      margin-top: 1.5rem;
      border-top: 2px solid var(--muted);
      padding-top: 1.5rem;
    }
    
    .reply {
      background: linear-gradient(135deg, rgba(102,126,234,.08) 0%, rgba(118,75,162,.08) 100%);
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 12px;
      border-left: 4px solid var(--bg-grad-a);
      animation: fadeInUp .4s ease both;
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .reply:hover {
      transform: translateX(8px);
      box-shadow: var(--shadow-sm);
      background: linear-gradient(135deg, rgba(102,126,234,.12) 0%, rgba(118,75,162,.12) 100%);
    }
    
    .reply-author {
      font-weight: 700;
      color: var(--bg-grad-a);
      margin-bottom: .5rem;
      display: flex;
      align-items: center;
      gap: .3rem;
    }
    
    .reply-author::before {
      content: 'üí¨';
    }

    .reply-form {
      margin-top: 1.5rem;
      animation: fadeInUp .5s ease;
    }
    
    .reply-form textarea {
      width: 100%;
      padding: 1rem;
      border: 2px solid var(--muted);
      border-radius: 12px;
      resize: vertical;
      min-height: 100px;
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
      font: inherit;
    }
    
    .reply-form textarea:focus {
      outline: none;
      border-color: var(--good);
      box-shadow: 0 0 0 4px rgba(72,187,120,.1);
      transform: translateY(-2px);
    }
    
    .btn-reply {
      margin-top: .8rem;
      padding: .8rem 1.5rem;
      background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 700;
      box-shadow: var(--shadow-sm);
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .btn-reply::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,.3);
      transform: translate(-50%, -50%);
      transition: width .5s ease, height .5s ease;
    }
    
    .btn-reply:hover::before {
      width: 250px;
      height: 250px;
    }
    
    .btn-reply:hover,
    .btn-reply:focus-visible {
      transform: translateY(-3px) scale(1.02);
      box-shadow: var(--shadow-md);
      outline: none;
    }
    
    .btn-reply:active {
      transform: translateY(-1px) scale(0.98);
    }

    /* ---------- Pagination ---------- */
    .pagination {
      display: flex;
      justify-content: center;
      margin: 2rem 0;
      gap: .6rem;
      animation: fadeInUp .7s ease;
    }
    
    .pagination a,
    .pagination span {
      padding: .7rem 1.2rem;
      border: 2px solid var(--muted);
      border-radius: 10px;
      text-decoration: none;
      color: var(--text-2);
      background: #fff;
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
      font-weight: 600;
    }
    
    .pagination a:hover {
      border-color: var(--bg-grad-a);
      transform: translateY(-3px);
      box-shadow: var(--shadow-sm);
    }
    
    .pagination .current {
      background: linear-gradient(135deg, var(--bg-grad-a) 0%, var(--bg-grad-b) 100%);
      color: #fff;
      border: none;
      box-shadow: var(--shadow-sm);
    }

    /* ---------- WebSocket status ---------- */
    #ws-status {
      padding: 1rem;
      text-align: center;
      border-radius: 12px;
      margin: 1rem 0;
      font-weight: 600;
      box-shadow: var(--shadow-sm);
      animation: fadeInUp .8s ease;
      transition: all .3s ease;
    }
    
    .status-connected {
      background: linear-gradient(135deg, rgba(72, 187, 120, .15), rgba(72, 187, 120, .05));
      color: #2f855a;
      border: 2px solid rgba(72, 187, 120, .3);
    }
    
    .status-disconnected {
      background: linear-gradient(135deg, rgba(245, 101, 101, .15), rgba(245, 101, 101, .05));
      color: #c53030;
      border: 2px solid rgba(245, 101, 101, .3);
      animation: pulse 2s ease-in-out infinite;
    }

    /* ---------- Chat widget ---------- */
    .chat-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 360px;
      height: 480px;
      background: var(--card);
      backdrop-filter: blur(20px);
      border-radius: var(--radius);
      box-shadow: var(--shadow-lg);
      display: flex;
      flex-direction: column;
      z-index: 1000;
      animation: pop .5s cubic-bezier(0.4, 0, 0.2, 1);
      transition: all .4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .chat-container:hover {
      box-shadow: 0 25px 50px rgba(0,0,0,.25);
    }
    
    .chat-header {
      padding: 1rem 1.2rem;
      border-bottom: 2px solid var(--muted);
      font-weight: 800;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: .5rem;
      background: linear-gradient(135deg, rgba(102,126,234,.1), rgba(118,75,162,.1));
      border-radius: var(--radius) var(--radius) 0 0;
    }
    
    .chat-actions {
      display: inline-flex;
      gap: .4rem;
    }
    
    .icon-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      padding: .4rem .6rem;
      border-radius: 8px;
      font-size: 1.1rem;
      transition: all .2s ease;
      color: var(--text-2);
    }
    
    .icon-btn:hover,
    .icon-btn:focus-visible {
      background: rgba(0,0,0,.08);
      transform: scale(1.1);
      outline: none;
    }
    
    .chat-messages {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: .6rem;
    }
    
    .chat-message {
      margin-bottom: .5rem;
      padding: .7rem .9rem;
      background: linear-gradient(135deg, #f7fafc, #edf2f7);
      border-radius: 12px;
      animation: fadeInUp .3s ease;
      transition: all .2s ease;
      border-left: 3px solid var(--bg-grad-a);
    }
    
    .chat-message:hover {
      background: linear-gradient(135deg, #edf2f7, #e2e8f0);
      transform: translateX(5px);
    }
    
    .chat-input {
      padding: .9rem;
      border-top: 2px solid var(--muted);
      display: flex;
      gap: .6rem;
      background: rgba(247,250,252,.5);
    }
    
    .chat-input input {
      flex: 1;
      padding: .75rem 1rem;
      border: 2px solid var(--muted);
      border-radius: 10px;
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
      font: inherit;
    }
    
    .chat-input input:focus {
      outline: none;
      border-color: var(--bg-grad-a);
      box-shadow: 0 0 0 3px rgba(102,126,234,.1);
    }
    
    .chat-input button {
      padding: .75rem 1.2rem;
      background: linear-gradient(135deg, var(--bg-grad-a), var(--bg-grad-b));
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 700;
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .chat-input button:hover {
      transform: scale(1.05);
      box-shadow: var(--shadow-sm);
    }

    .chat-container.min {
      height: auto;
      width: 260px;
    }
    
    .chat-container.min .chat-messages,
    .chat-container.min .chat-input {
      display: none;
    }

    /* ---------- Responsive ---------- */
    @media (max-width: 1024px) {
      .container {
        flex-direction: column;
      }
      .sidebar {
        flex: 1;
        position: static;
      }
    }
    
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 1rem;
      }
      .container {
        padding: 0 1rem;
      }
      .chat-container {
        right: 12px;
        bottom: 12px;
        width: calc(100% - 24px);
        max-width: 360px;
        height: 55vh;
      }
    }

    /* ---------- Empty states ---------- */
    .empty {
      border: 2px dashed var(--muted);
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      color: var(--text-3);
      background: linear-gradient(135deg, rgba(102,126,234,.03), rgba(118,75,162,.03));
      animation: fadeInUp .5s ease;
    }

    /* ---------- Loading skeleton ---------- */
    .skeleton {
      background: linear-gradient(90deg, #eee 25%, #f7f7f7 37%, #eee 63%);
      background-size: 400% 100%;
      animation: shimmer 1.4s ease-in-out infinite;
      border-radius: 10px;
    }

    /* ---------- Scroll behavior ---------- */
    html {
      scroll-behavior: smooth;
    }

    ::-webkit-scrollbar {
      width: 10px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(226, 232, 240, .5);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, var(--bg-grad-a), var(--bg-grad-b));
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #5568d3, #5d3a85);
    }

    /* Add stagger animation delays */
    .thread:nth-child(1) { animation-delay: 0s; }
    .thread:nth-child(2) { animation-delay: .1s; }
    .thread:nth-child(3) { animation-delay: .2s; }
    .thread:nth-child(4) { animation-delay: .3s; }
    .thread:nth-child(5) { animation-delay: .4s; }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <h1 aria-label="Discussion Forum">üí¨ Discussion Forum</h1>
      <nav>
        <a href="#home">üè† Home</a>
        <a href="#new-thread">‚úèÔ∏è New Thread</a>
        <span class="user-info" aria-live="polite">Welcome, User!</span>
        <a href="#profile">üë§ Profile</a>
        <a href="#notifications" style="position: relative;">
          üîî Notifications
          <span style="position:absolute;top:-8px;right:-8px;background:var(--bad);color:#fff;border-radius:50%;padding:2px 6px;font-size:.8rem;animation:bounce 1s ease-in-out infinite;">3</span>
        </a>
        <a href="#logout">üö™ Logout</a>
      </nav>
    </div>
  </header>

  <div class="container">
    <aside class="sidebar" aria-label="Sidebar">
      <div class="sidebar-card">
        <h3>üìÇ Categories</h3>
        <select id="category-filter" aria-label="Filter by category" style="width:100%;padding:.75rem;margin-bottom:1rem;border:2px solid var(--muted);border-radius:10px;font:inherit;cursor:pointer;transition:all .3s ease;">
          <option value="">All Categories</option>
          <option value="1">üéÆ Gaming</option>
          <option value="2">üíª Technology</option>
          <option value="3">üé® Design</option>
          <option value="4">üìö Books</option>
          <option value="5">üé¨ Movies</option>
        </select>
        <ul>
          <li><a href="#gaming">üéÆ Gaming</a></li>
          <li><a href="#tech">üíª Technology</a></li>
          <li><a href="#design">üé® Design</a></li>
          <li><a href="#books">üìö Books</a></li>
          <li><a href="#movies">üé¨ Movies</a></li>
        </ul>
      </div>

      <div class="sidebar-card">
        <h3>üî• Recent Posts</h3>
        <ul id="recent-posts">
          <li><a href="#thread-1">Amazing new game release!</a></li>
          <li><a href="#thread-2">Best coding practices 2025</a></li>
          <li><a href="#thread-3">UI/UX trends this year</a></li>
          <li><a href="#thread-4">Must-read books</a></li>
          <li><a href="#thread-5">Top movies of the season</a></li>
        </ul>
      </div>
    </aside>

    <main class="main" id="main" aria-live="polite">
      <div class="search">
        <input type="text" id="search-input" placeholder="üîç Search threads..." aria-label="Search threads" />
        <button class="btn-primary" onclick="performSearch()" aria-label="Run search">Search</button>
      </div>

      <div class="new-thread" id="new-thread" role="region" aria-labelledby="new-thread-title">
        <h3 id="new-thread-title">‚ú® Start a New Thread</h3>
        <input type="text" id="thread-title" placeholder="Enter an interesting title..." aria-label="Thread title" />
        <select id="thread-category" aria-label="Choose a category">
          <option value="">Select Category</option>
          <option value="1">üéÆ Gaming</option>
          <option value="2">üíª Technology</option>
          <option value="3">üé® Design</option>
          <option value="4">üìö Books</option>
          <option value="5">üé¨ Movies</option>
        </select>
        <textarea id="thread-content" placeholder="Share your thoughts with the community..." aria-label="Thread content"></textarea>
        <button class="btn-primary" onclick="createThread()">üöÄ Post Thread</button>
      </div>

      <div id="threads">
        <!-- Sample Thread 1 -->
        <div class="thread" id="thread-1" data-id="1">
          <h4>What's your favorite game of 2025?</h4>
          <div class="thread-meta">
            <span>üë§ GameMaster</span>
            <span>üìÖ Nov 5, 2025</span>
            <span>üí¨ 12 replies</span>
            <div class="vote-buttons">
              <button class="vote-btn" onclick="handleVote(this, 'thread', 1, 1)">üëç</button>
              <span class="vote-count">45</span>
              <button class="vote-btn" onclick="handleVote(this, 'thread', 1, -1)">üëé</button>
            </div>
          </div>
          <p>I've been playing some amazing titles this year! What are your top picks? I'm really enjoying the new indie games that have been coming out. The creativity in game design has been incredible!</p>
          
          <div class="replies">
            <div class="reply">
              <div class="reply-author">PixelWarrior</div>
              <p>Definitely the new RPG that just dropped last month! The storyline is incredible and the graphics are stunning. Can't stop playing it!</p>
              <div class="vote-buttons">
                <button class="vote-btn" onclick="handleVote(this, 'reply', 101, 1)">üëç</button>
                <span class="vote-count">23</span>
                <button class="vote-btn" onclick="handleVote(this, 'reply', 101, -1)">üëé</button>
              </div>
            </div>
            <div class="reply">
              <div class="reply-author">RetroGamer</div>
              <p>I'm loving the retro-style platformers! They bring back so many memories while still feeling fresh and innovative.</p>
              <div class="vote-buttons">
                <button class="vote-btn" onclick="handleVote(this, 'reply', 102, 1)">üëç</button>
                <span class="vote-count">18</span>
                <button class="vote-btn" onclick="handleVote(this, 'reply', 102, -1)">üëé</button>
              </div>
            </div>
          </div>
          
          <div class="reply-form">
            <textarea placeholder="Add a reply..." aria-label="Reply content"></textarea>
            <button class="btn-reply" onclick="createReply(1, this)">Reply</button>
          </div>
        </div>

        <!-- Sample Thread 2 -->
        <div class="thread" id="thread-2" data-id="2">
          <h4>Best coding practices for modern web development?</h4>
          <div class="thread-meta">
            <span>üë§ CodeNinja</span>
            <span>üìÖ Nov 4, 2025</span>
            <span>üí¨ 8 replies</span>
            <div class="vote-buttons">
              <button class="vote-btn" data-state="up" onclick="handleVote(this, 'thread', 2, 1)">üëç</button>
              <span class="vote-count">67</span>
              <button class="vote-btn" onclick="handleVote(this, 'thread', 2, -1)">üëé</button>
            </div>
          </div>
          <p>Looking to improve my development workflow. What practices do you consider essential in 2025? Especially interested in performance optimization and accessibility!</p>
          
          <div class="replies">
            <div class="reply">
              <div class="reply-author">WebWizard</div>
              <p>Focus on semantic HTML first, then progressive enhancement. Also, don't forget about Web Vitals and Core Web Vitals metrics!</p>
              <div class="vote-buttons">
                <button class="vote-btn" data-state="up" onclick="handleVote(this, 'reply', 201, 1)">üëç</button>
                <span class="vote-count">34</span>
                <button class="vote-btn" onclick="handleVote(this, 'reply', 201, -1)">üëé</button>
              </div>
            </div>
          </div>
          
          <div class="reply-form">
            <textarea placeholder="Add a reply..." aria-label="Reply content"></textarea>
            <button class="btn-reply" onclick="createReply(2, this)">Reply</button>
          </div>
        </div>

        <!-- Sample Thread 3 -->
        <div class="thread" id="thread-3" data-id="3">
          <h4>UI/UX Design Trends for 2025</h4>
          <div class="thread-meta">
            <span>üë§ DesignGuru</span>
            <span>üìÖ Nov 3, 2025</span>
            <span>üí¨ 15 replies</span>
            <div class="vote-buttons">
              <button class="vote-btn" onclick="handleVote(this, 'thread', 3, 1)">üëç</button>
              <span class="vote-count">89</span>
              <button class="vote-btn" onclick="handleVote(this, 'thread', 3, -1)">üëé</button>
            </div>
          </div>
          <p>What design trends are you seeing dominate this year? I'm noticing a lot of glassmorphism, bold typography, and immersive 3D elements. What's your take?</p>
          
          <div class="reply-form">
            <textarea placeholder="Add a reply..." aria-label="Reply content"></textarea>
            <button class="btn-reply" onclick="createReply(3, this)">Reply</button>
          </div>
        </div>
      </div>

      <div class="pagination">
        <a href="#page1">&laquo; First</a>
        <a href="#prev">Previous</a>
        <span class="current">Page 1 of 5</span>
        <a href="#next">Next</a>
        <a href="#last">Last &raquo;</a>
      </div>

      <div id="ws-status" class="status-connected">WebSocket: Connected ‚úì</div>
    </main>
  </div>

  <div class="chat-container" id="chat-container">
    <div class="chat-header">
      üí¨ Live Chat
      <div class="chat-actions">
        <button class="icon-btn" onclick="toggleChat()" title="Minimize">‚àí</button>
      </div>
    </div>
    <div class="chat-messages" id="chat-messages">
      <div class="chat-message"><strong>Admin:</strong> Welcome to the forum chat!</div>
      <div class="chat-message"><strong>User1:</strong> Hey everyone! Great discussions today.</div>
      <div class="chat-message"><strong>User2:</strong> Agreed! Love the new UI updates.</div>
    </div>
    <div class="chat-input">
      <input type="text" id="chat-input" placeholder="Type a message..." onkeypress="if(event.key==='Enter') sendMessage()" />
      <button onclick="sendMessage()">Send</button>
    </div>
  </div>

  <script>
    // Simulate WebSocket connection
    let wsConnected = true;
    
    function toggleConnectionStatus() {
      const statusEl = document.getElementById('ws-status');
      wsConnected = !wsConnected;
      
      if (wsConnected) {
        statusEl.className = 'status-connected';
        statusEl.textContent = 'WebSocket: Connected ‚úì';
      } else {
        statusEl.className = 'status-disconnected';
        statusEl.textContent = 'WebSocket: Disconnected - Reconnecting...';
        setTimeout(toggleConnectionStatus, 3000);
      }
    }

    function createThread() {
      const title = document.getElementById('thread-title').value.trim();
      const category = document.getElementById('thread-category').value;
      const content = document.getElementById('thread-content').value.trim();
      
      if (!title || !content) {
        alert('Please fill in both title and content!');
        return;
      }
      
      const threadsDiv = document.getElementById('threads');
      const threadId = Date.now();
      const threadDiv = document.createElement('div');
      threadDiv.className = 'thread';
      threadDiv.id = `thread-${threadId}`;
      threadDiv.innerHTML = `
        <h4>${escapeHtml(title)}</h4>
        <div class="thread-meta">
          <span>üë§ You</span>
          <span>üìÖ Just now</span>
          <span>üí¨ 0 replies</span>
          <div class="vote-buttons">
            <button class="vote-btn" onclick="handleVote(this, 'thread', ${threadId}, 1)">üëç</button>
            <span class="vote-count">0</span>
            <button class="vote-btn" onclick="handleVote(this, 'thread', ${threadId}, -1)">üëé</button>
          </div>
        </div>
        <p>${escapeHtml(content)}</p>
        <div class="reply-form">
          <textarea placeholder="Add a reply..." aria-label="Reply content"></textarea>
          <button class="btn-reply" onclick="createReply(${threadId}, this)">Reply</button>
        </div>
      `;
      
      threadsDiv.insertBefore(threadDiv, threadsDiv.firstChild);
      
      document.getElementById('thread-title').value = '';
      document.getElementById('thread-category').value = '';
      document.getElementById('thread-content').value = '';
      
      // Add success animation
      threadDiv.style.animation = 'pop 0.5s cubic-bezier(0.4, 0, 0.2, 1)';
      
      // Show success message
      showNotification('Thread created successfully! üéâ');
    }

    function createReply(threadId, button) {
      const textarea = button.previousElementSibling;
      const content = textarea.value.trim();
      
      if (!content) {
        alert('Please enter a reply!');
        return;
      }
      
      const threadDiv = document.getElementById(`thread-${threadId}`);
      let repliesDiv = threadDiv.querySelector('.replies');
      
      if (!repliesDiv) {
        repliesDiv = document.createElement('div');
        repliesDiv.className = 'replies';
        const replyForm = threadDiv.querySelector('.reply-form');
        threadDiv.insertBefore(repliesDiv, replyForm);
      }
      
      const replyId = Date.now();
      const replyDiv = document.createElement('div');
      replyDiv.className = 'reply';
      replyDiv.innerHTML = `
        <div class="reply-author">You</div>
        <p>${escapeHtml(content)}</p>
        <div class="vote-buttons">
          <button class="vote-btn" onclick="handleVote(this, 'reply', ${replyId}, 1)">üëç</button>
          <span class="vote-count">0</span>
          <button class="vote-btn" onclick="handleVote(this, 'reply', ${replyId}, -1)">üëé</button>
        </div>
      `;
      
      repliesDiv.appendChild(replyDiv);
      textarea.value = '';
      
      // Update reply count
      const replyCountSpan = threadDiv.querySelector('.thread-meta span:nth-child(3)');
      const currentCount = parseInt(replyCountSpan.textContent);
      replyCountSpan.textContent = `üí¨ ${currentCount + 1} replies`;
      
      // Scroll to new reply
      replyDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      
      showNotification('Reply posted! üí¨');
    }

    function handleVote(button, type, id, voteType) {
      const voteButtons = button.parentElement;
      const voteCountSpan = voteButtons.querySelector('.vote-count');
      const upButton = voteButtons.querySelector('.vote-btn:first-child');
      const downButton = voteButtons.querySelector('.vote-btn:last-child');
      
      let currentCount = parseInt(voteCountSpan.textContent);
      const wasUpvoted = upButton.hasAttribute('data-state') && upButton.getAttribute('data-state') === 'up';
      const wasDownvoted = downButton.hasAttribute('data-state') && downButton.getAttribute('data-state') === 'down';
      
      // Remove existing states
      upButton.removeAttribute('data-state');
      downButton.removeAttribute('data-state');
      
      // Handle vote logic
      if (voteType === 1) {
        if (wasUpvoted) {
          currentCount--;
        } else {
          if (wasDownvoted) currentCount++;
          currentCount++;
          upButton.setAttribute('data-state', 'up');
        }
      } else {
        if (wasDownvoted) {
          currentCount++;
        } else {
          if (wasUpvoted) currentCount--;
          currentCount--;
          downButton.setAttribute('data-state', 'down');
        }
      }
      
      voteCountSpan.textContent = currentCount;
      voteCountSpan.style.animation = 'none';
      setTimeout(() => {
        voteCountSpan.style.animation = 'bounce 0.6s ease';
      }, 10);
    }

    function performSearch() {
      const query = document.getElementById('search-input').value.trim();
      if (query) {
        showNotification(`Searching for: "${query}" üîç`);
        // In a real app, this would filter threads
      }
    }

    function toggleChat() {
      const chat = document.getElementById('chat-container');
      chat.classList.toggle('min');
    }

    function sendMessage() {
      const input = document.getElementById('chat-input');
      const content = input.value.trim();
      
      if (!content) return;
      
      const chatMessages = document.getElementById('chat-messages');
      const messageDiv = document.createElement('div');
      messageDiv.className = 'chat-message';
      messageDiv.innerHTML = `<strong>You:</strong> ${escapeHtml(content)}`;
      chatMessages.appendChild(messageDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      
      input.value = '';
      
      // Simulate response
      setTimeout(() => {
        const responseDiv = document.createElement('div');
        responseDiv.className = 'chat-message';
        responseDiv.innerHTML = '<strong>Bot:</strong> Thanks for your message! ü§ñ';
        chatMessages.appendChild(responseDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }, 1000);
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function showNotification(message) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 100px;
        right: 20px;
        background: linear-gradient(135deg, var(--good), #38a169);
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 12px;
        box-shadow: var(--shadow-lg);
        z-index: 10000;
        animation: slideInRight 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        font-weight: 600;
      `;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'fadeInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1) reverse';
        setTimeout(() => notification.remove(), 400);
      }, 3000);
    }

    // Add smooth scroll behavior
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      });
    });

    // Category filter change animation
    document.getElementById('category-filter').addEventListener('change', function() {
      const threads = document.querySelectorAll('.thread');
      threads.forEach((thread, index) => {
        thread.style.animation = 'none';
        setTimeout(() => {
          thread.style.animation = `fadeInUp 0.6s ease both ${index * 0.1}s`;
        }, 10);
      });
    });

    // Add hover effect to sidebar items
    document.querySelectorAll('.sidebar a').forEach(link => {
      link.addEventListener('mouseenter', function() {
        this.style.transform = 'translateX(8px)';
      });
      link.addEventListener('mouseleave', function() {
        this.style.transform = 'translateX(0)';
      });
    });
  </script>
</body>
</html>